@model ManageRoles.ViewModels.ProductCreateVM
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<script src="~/Scripts/inputmask/inputmask.min.js"></script>
<script src="~/Scripts/inputmask/bindings/inputmask.binding.js"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
<script src="~/Scripts/GridTemplates/ProductGridTem.js"></script>
<div class="panel panel-default">
    <div class="panel-heading">
        Add Category
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <div class="panel-body">

        <div id="person_aert" class="alert" hidden="hidden" role="alert">
            <a href="#" class="close" onclick="hideaert()" aria-label="close">&times;</a>
            <strong>Message!</strong><div id="person_message"></div>
        </div>

        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @using (Ajax.BeginForm("Create", "Product", new AjaxOptions { HttpMethod = "POST", OnSuccess = "OnSuccess", OnFailure = "OnFailure" }))
        {
            @Html.AntiForgeryToken()
            <div class="row top-margin">
                <div class="col-lg-12">

                </div>
            </div>
            <div class="row top-margin">
                <div class="clearfix"></div>
                <div class="col-lg-4">
                    @Html.LabelFor(model => model.ProductName, htmlAttributes: new { @class = "control-label " })
                    @Html.TextBoxFor(model => model.ProductName, new { @class = "form-control", @maxlength = 50 })
                    @Html.ValidationMessageFor(model => model.ProductName, "", new { @class = "text-danger" })
                </div>
                <div class="col-lg-4">
                    @Html.LabelFor(model => model.Categories, htmlAttributes: new { @class = "control-label " })
                    @Html.DropDownListFor(model => model.CategoryID, new SelectList(Model.Categories, "ID", "CategoryName"),"Select Category", new { @class = "form-control", @id = "" })
                    @Html.ValidationMessageFor(model => model.Categories, "", new { @class = "text-danger" })
                    <br />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-lg-4">
                    <input type="submit" value="Add Product" class="btn btn-success" id="BtnAddPlot" />
                </div>
            </div>

        }
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">Products</div>
        <div class="panel-body">
            <table id="ProductsViewGrid"></table>
            <div id="pager_ProductsViewGrid"></div>
        </div>

    </div>
</div>





<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
<script type="text/javascript">
    function OnSuccess(data) {
        $("#person_message").html(data.param2);
        $("#person_aert").addClass("alert alert-success alert-dismissible");
        $("#person_aert").show();
        gridReLoad();
    }
    function OnFailure(response) {
        debugger;
        data = response.responseJSON;
        $("#person_message").html(data.param2);
        $("#person_aert").addClass("alert alert-danger alert-dismissible");
        $("#person_aert").show();
    }
    function hideaert() {
        $("#person_aert").hide();
    }
    $(function () {

        Z_BaseClassJQGRID.bindGridTempate("ProductsViewGrid", Z_COMMON.URL.Products_Grid_View, 'Product Search', ProductGridTem, "local");
        gridReLoad();
    });
    function gridReLoad() {
        var tst = {}
        Z_BaseClassJQGRID.loadGridWithGridID("ProductsViewGrid", tst);

    }


</script>
<script src="~/Scripts/gridScripts/common_script.js"></script>
<script src="~/Scripts/gridScripts/Z_BaseClassJQGRID.js"></script>
